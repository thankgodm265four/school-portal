import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.JXKNaeUN.js";import{b as j,c as k,I as f,a as C}from"./Components.gAA2fnHL.js";import{a as S,b as L,c as I,d as E}from"./api.CU3TVay2.js";function M(r,i){const t={user:r,role:i,timestamp:new Date().toISOString()};localStorage.setItem("school_portal_session",JSON.stringify(t)),localStorage.setItem("school_portal_role",i)}function P(){return localStorage.getItem("school_portal_role")}function z(){const r=P(),t={student:"/student",teacher:"/teacher",parent:"/parent",admin:"/admin"}[r]||"/login";window.location.href=t}function W(){const[r,i]=l.useState("student"),[t,d]=l.useState({firstName:"",regNumber:"",staffId:"",email:"",password:"",username:""}),[g,x]=l.useState(!1),[u,p]=l.useState(!1),[h,m]=l.useState(""),[c,w]=l.useState(!1),b=[{value:"student",label:"ðŸŽ“ Student"},{value:"teacher",label:"ðŸ‘¨â€ðŸ« Teacher"},{value:"parent",label:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§ Parent / Guardian"},{value:"admin",label:"ðŸ” Administrator"}],o=(e,n)=>{d(N=>({...N,[e]:n})),m("")},v=async e=>{e.preventDefault(),m(""),p(!0);try{let n;if(r==="student"){if(!t.firstName||!t.regNumber)throw new Error("Please enter your first name and registration number");n=await S(t.firstName.trim(),t.regNumber.trim())}else if(r==="teacher"){if(!t.firstName||!t.staffId)throw new Error("Please enter your first name and staff ID");n=await L(t.firstName.trim(),t.staffId.trim())}else if(r==="parent"){if(!t.email||!t.password)throw new Error("Please enter your email and password");n=await I(t.email.trim(),t.password)}else if(r==="admin"){if(!t.username||!t.password)throw new Error("Please enter your username and password");n=await E(t.username.trim(),t.password)}M(n,r),z()}catch(n){m(n.message||"Login failed. Please check your credentials and try again."),p(!1)}},s=(()=>{switch(r){case"student":return{field1:{label:"First Name",placeholder:"Enter your first name",type:"text",value:t.firstName,onChange:e=>o("firstName",e)},field2:{label:"Registration Number",placeholder:"e.g., USS/2024/001",type:"text",value:t.regNumber,onChange:e=>o("regNumber",e)}};case"teacher":return{field1:{label:"First Name",placeholder:"Enter your first name",type:"text",value:t.firstName,onChange:e=>o("firstName",e)},field2:{label:"Staff ID",placeholder:"e.g., TCH/2020/001",type:"text",value:t.staffId,onChange:e=>o("staffId",e)}};case"parent":return{field1:{label:"Email Address",placeholder:"Enter your email",type:"email",value:t.email,onChange:e=>o("email",e)},field2:{label:"Password",placeholder:"Enter your password",type:"password",value:t.password,onChange:e=>o("password",e)}};case"admin":return{field1:{label:"Username",placeholder:"Enter admin username",type:"text",value:t.username,onChange:e=>o("username",e)},field2:{label:"Password",placeholder:"Enter admin password",type:"password",value:t.password,onChange:e=>o("password",e)}};default:return{}}})(),y=()=>{r==="student"?d(e=>({...e,firstName:"Adaeze",regNumber:"USS/2024/001"})):r==="teacher"?d(e=>({...e,firstName:"Ngozi",staffId:"TCH/2020/001"})):r==="admin"&&d(e=>({...e,username:"admin",password:"admin123"}))};return a.jsx("div",{className:"card p-8",children:a.jsxs("form",{onSubmit:v,className:"space-y-5",children:[h&&a.jsx(j,{variant:"danger",onClose:()=>m(""),children:h}),a.jsx(k,{label:"Login as",options:b,value:r,onChange:e=>{i(e.target.value),m(""),d({firstName:"",regNumber:"",staffId:"",email:"",password:"",username:""})}}),a.jsx(f,{label:s.field1.label,type:s.field1.type,placeholder:s.field1.placeholder,value:s.field1.value,onChange:e=>s.field1.onChange(e.target.value),icon:s.field1.type==="email"?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}):a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsxs("div",{className:"relative",children:[a.jsx(f,{label:s.field2.label,type:s.field2.type==="password"&&c?"text":s.field2.type,placeholder:s.field2.placeholder,value:s.field2.value,onChange:e=>s.field2.onChange(e.target.value),icon:s.field2.type==="password"?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.field2.type==="password"&&a.jsx("button",{type:"button",onClick:()=>w(!c),className:"absolute right-3 top-[38px] text-neutral-400 hover:text-neutral-600",children:c?a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),(r==="parent"||r==="admin")&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:g,onChange:e=>x(e.target.checked),className:"w-4 h-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Remember me"})]}),a.jsx("a",{href:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Forgot password?"})]}),a.jsx(C,{type:"submit",variant:"primary",className:"w-full",loading:u,children:u?"Signing in...":"Sign In"}),(r==="student"||r==="teacher"||r==="admin")&&a.jsxs("div",{className:"pt-4 border-t border-neutral-200 dark:border-neutral-700",children:[a.jsx("p",{className:"text-xs text-neutral-500 text-center mb-3",children:"For demo purposes, use the button below to fill credentials:"}),a.jsxs("button",{type:"button",onClick:y,className:"w-full py-2.5 px-4 text-sm font-medium text-primary-600 bg-primary-50 dark:bg-primary-900/20 dark:text-primary-400 rounded-xl hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors",children:["Use Demo ",r.charAt(0).toUpperCase()+r.slice(1)," Credentials"]})]})]})})}export{W as default};
